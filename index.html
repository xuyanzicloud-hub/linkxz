<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TopUpZone - Top Up Game Online</title>
  <style>
    :root {
      --bg: #121212;
      --card: #1e1e2f;
      --text: #f5f5f5;
      --accent: #007bff;
      --border: #2c2c3a;
    }
    [data-theme="light"] {
      --bg: #f4f6f9;
      --card: #ffffff;
      --text: #222;
      --accent: #007bff;
      --border: #ccc;
    }
    * {
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      margin: 0;
      background-color: var(--bg);
      color: var(--text);
      transition: 0.3s ease;
    }
    header {
      background-color: var(--card);
      color: var(--text);
      text-align: center;
      padding: 1.5rem 1rem;
      border-bottom: 2px solid var(--accent);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header img {
      height: 40px;
      margin-right: 10px;
    }
    header h1 {
      font-size: 1.6rem;
      margin: 0;
    }
    .theme-toggle {
      background: none;
      border: 1px solid var(--accent);
      color: var(--text);
      border-radius: 8px;
      padding: 0.4rem 0.8rem;
      cursor: pointer;
      transition: 0.3s;
    }
    .theme-toggle:hover {
      background-color: var(--accent);
      color: white;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: var(--card);
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }
    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    label {
      font-weight: 600;
    }
    input, select {
      padding: 0.7rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
    }
    input::placeholder {
      color: #aaa;
    }
    button {
      background-color: var(--accent);
      color: white;
      padding: 0.8rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { opacity: 0.85; }
    .hidden { display: none; }
    .logout {
      text-align: right;
      margin-bottom: 1rem;
    }
    .switch {
      text-align: center;
      margin-top: 1rem;
    }
    .switch a {
      color: var(--accent);
      cursor: pointer;
      text-decoration: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 0.7rem;
      text-align: center;
    }
    th { background-color: rgba(255,255,255,0.1); }
    footer {
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      color: var(--text);
      background-color: var(--card);
      border-top: 2px solid var(--accent);
    }
    .admin-controls button {
      background: red;
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      border: none;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body data-theme="dark">

  <header>
    <div style="display:flex; align-items:center; gap:10px;">
      <img src="https://cdn-icons-png.flaticon.com/512/868/868786.png" alt="Logo">
      <h1>TopUpZone</h1>
    </div>
    <button class="theme-toggle" id="themeToggle">‚òÄÔ∏è Light</button>
  </header>

  <div class="container">

    <!-- LOGIN -->
    <div id="loginPage">
      <h2>Login</h2>
      <form id="loginForm">
        <label>Email</label>
        <input type="email" id="loginEmail" required placeholder="Masukkan email">
        <label>Password</label>
        <input type="password" id="loginPassword" required placeholder="Masukkan password">
        <button type="submit">Masuk</button>
      </form>
      <div class="switch">
        Belum punya akun? <a id="goRegister">Daftar</a>
      </div>
    </div>

    <!-- REGISTER -->
    <div id="registerPage" class="hidden">
      <h2>Daftar Akun Baru</h2>
      <form id="registerForm">
        <label>Nama Lengkap</label>
        <input type="text" id="regName" required placeholder="Nama kamu">
        <label>Email</label>
        <input type="email" id="regEmail" required placeholder="Email aktif">
        <label>Password</label>
        <input type="password" id="regPassword" required placeholder="Minimal 6 karakter">
        <button type="submit">Daftar</button>
      </form>
      <div class="switch">
        Sudah punya akun? <a id="goLogin">Masuk</a>
      </div>
    </div>

    <!-- DASHBOARD USER -->
    <div id="dashboard" class="hidden">
      <div class="logout"><button id="logoutBtn">Logout</button></div>
      <h2>Form Top Up Game</h2>
      <form id="topupForm">
        <label>Pilih Game</label>
        <select id="game" required>
          <option value="">-- Pilih Game --</option>
          <option>Mobile Legends</option>
          <option>Free Fire</option>
          <option>PUBG Mobile</option>
          <option>Genshin Impact</option>
        </select>

        <label>ID Pengguna</label>
        <input type="text" id="idGame" required placeholder="Contoh: 12345678">

        <label>Nominal Top Up</label>
        <select id="nominal" required>
          <option value="">-- Pilih Nominal --</option>
          <option>10</option>
          <option>50</option>
          <option>100</option>
          <option>500</option>
        </select>

        <label>Metode Pembayaran</label>
        <select id="payment" required>
          <option value="">-- Pilih Pembayaran --</option>
          <option>DANA</option>
          <option>OVO</option>
          <option>GoPay</option>
          <option>Transfer Bank</option>
        </select>

        <button type="submit">Top Up Sekarang</button>
      </form>

      <h2>Riwayat Transaksi</h2>
      <table>
        <thead><tr><th>Tanggal</th><th>Game</th><th>ID</th><th>Nominal</th><th>Pembayaran</th></tr></thead>
        <tbody id="historyBody"><tr><td colspan="5">Belum ada transaksi</td></tr></tbody>
      </table>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" class="hidden">
      <div class="logout"><button id="logoutAdmin">Logout Admin</button></div>
      <h2>Panel Admin - Semua Transaksi</h2>
      <table>
        <thead>
          <tr><th>Pengguna</th><th>Tanggal</th><th>Game</th><th>ID</th><th>Nominal</th><th>Pembayaran</th><th>Aksi</th></tr>
        </thead>
        <tbody id="adminBody"><tr><td colspan="7">Belum ada data</td></tr></tbody>
      </table>
    </div>

  </div>

  <footer>¬© 2025 TopUpZone | Semua Hak Dilindungi</footer>

  <script>
    const loginPage = document.getElementById('loginPage');
    const registerPage = document.getElementById('registerPage');
    const dashboard = document.getElementById('dashboard');
    const adminPanel = document.getElementById('adminPanel');
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;

    // Theme toggle
    themeToggle.onclick = () => {
      if (body.dataset.theme === 'dark') {
        body.dataset.theme = 'light';
        themeToggle.textContent = 'üåô Dark';
      } else {
        body.dataset.theme = 'dark';
        themeToggle.textContent = '‚òÄÔ∏è Light';
      }
    };

    document.getElementById('goRegister').onclick = () => {
      loginPage.classList.add('hidden');
      registerPage.classList.remove('hidden');
    };
    document.getElementById('goLogin').onclick = () => {
      registerPage.classList.add('hidden');
      loginPage.classList.remove('hidden');
    };

    // Register user
    document.getElementById('registerForm').addEventListener('submit', e => {
      e.preventDefault();
      const name = regName.value;
      const email = regEmail.value;
      const pass = regPassword.value;
      if (pass.length < 6) return alert('Password minimal 6 karakter');
      let users = JSON.parse(localStorage.getItem('users')) || [];
      if (users.find(u => u.email === email)) return alert('Email sudah terdaftar');
      users.push({ name, email, pass, history: [] });
      localStorage.setItem('users', JSON.stringify(users));
      alert('‚úÖ Pendaftaran berhasil!');
      registerPage.classList.add('hidden');
      loginPage.classList.remove('hidden');
    });

    // Login
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();
      const email = loginEmail.value;
      const pass = loginPassword.value;
      if (email === "admin@topupzone.com" && pass === "admin123") {
        localStorage.setItem('adminLogin', 'true');
        showAdminPanel();
        return;
      }
      let users = JSON.parse(localStorage.getItem('users')) || [];
      let user = users.find(u => u.email === email && u.pass === pass);
      if (!user) return alert('Email atau password salah.');
      localStorage.setItem('currentUser', email);
      showDashboard();
    });

    // Logout user
    logoutBtn.onclick = () => {
      localStorage.removeItem('currentUser');
      dashboard.classList.add('hidden');
      loginPage.classList.remove('hidden');
    };

    // Logout admin
    logoutAdmin.onclick = () => {
      localStorage.removeItem('adminLogin');
      adminPanel.classList.add('hidden');
      loginPage.classList.remove('hidden');
    };

    // Load page
    if (localStorage.getItem('adminLogin') === 'true') showAdminPanel();
    else if (localStorage.getItem('currentUser')) showDashboard();

    function showDashboard() {
      loginPage.classList.add('hidden');
      registerPage.classList.add('hidden');
      dashboard.classList.remove('hidden');
      loadUserHistory();
    }

    function showAdminPanel() {
      loginPage.classList.add('hidden');
      adminPanel.classList.remove('hidden');
      loadAdminData();
    }

    // Topup
    document.getElementById('topupForm').addEventListener('submit', e => {
      e.preventDefault();
      const email = localStorage.getItem('currentUser');
      let users = JSON.parse(localStorage.getItem('users')) || [];
      let user = users.find(u => u.email === email);
      const now = new Date().toLocaleString('id-ID');
      const trx = {
        date: now,
        game: game.value,
        idGame: idGame.value,
        nominal: nominal.value,
        payment: payment.value
      };
      user.history.push(trx);
      localStorage.setItem('users', JSON.stringify(users));
      alert(`‚úÖ Top Up ${trx.game} ${trx.nominal} Diamonds berhasil!`);
      topupForm.reset();
      loadUserHistory();
    });

    function loadUserHistory() {
      const email = localStorage.getItem('currentUser');
      const users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users.find(u => u.email === email);
      const tbody = document.getElementById('historyBody');
      tbody.innerHTML = '';
      if (!user || user.history.length === 0)
        return tbody.innerHTML = '<tr><td colspan="5">Belum ada transaksi</td></tr>';
      user.history.slice().reverse().forEach(h => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${h.date}</td><td>${h.game}</td><td>${h.idGame}</td><td>${h.nominal}</td><td>${h.payment}</td>`;
        tbody.appendChild(tr);
      });
    }

    // Admin Panel
    function loadAdminData() {
      const users = JSON.parse(localStorage.getItem('users')) || [];
      const tbody = document.getElementById('adminBody');
      tbody.innerHTML = '';
      let hasData = false;
      users.forEach((u, ui) => {
        u.history.forEach((h, hi) => {
          hasData = true;
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${u.email}</td>
            <td>${h.date}</td>
            <td>${h.game}</td>
            <td>${h.idGame}</td>
            <td>${h.nominal}</td>
            <td>${h.payment}</td>
            <td class="admin-controls"><button onclick="deleteTrx(${ui},${hi})">Hapus</button></td>
          `;
          tbody.appendChild(tr);
        });
      });
      if (!hasData)
        tbody.innerHTML = '<tr><td colspan="7">Belum ada transaksi</td></tr>';
    }

    function deleteTrx(userIndex, trxIndex) {
      let users = JSON.parse(localStorage.getItem('users')) || [];
      users[userIndex].history.splice(trxIndex, 1);
      localStorage.setItem('users', JSON.stringify(users));
      loadAdminData();
      alert('Transaksi berhasil dihapus.');
    }
  </script>
</body>
</html>
